<!doctype html>
<html>
<head>
	<title>happytime</title>
	<!-- <link rel="stylesheet" type="text/css" href="style.css"/> -->
	<link href='http://fonts.googleapis.com/css?family=Source+Sans+Pro:400,700' rel='stylesheet' type='text/css'>
	<style>
		* { margin: 0; padding: 0; box-sizing: border-box; }
		body, button { 
			font: 14pt 'Source Sans Pro', Helvetica, Arial; 
			letter-spacing: 1px;
		}
		body,
		footer,
		header {
			/* IE10 Consumer Preview */ 
			background: rgba(239,197,202,1);
			background: rgba(130,237,210,1);
			background: -moz-linear-gradient(left, rgba(130,237,210,1) 0%, rgba(131,209,251,1) 100%);
			background: -webkit-gradient(left top, right top, color-stop(0%, rgba(130,237,210,1)), color-stop(100%, rgba(131,209,251,1)));
			background: -webkit-linear-gradient(left, rgba(130,237,210,1) 0%, rgba(131,209,251,1) 100%);
			background: -o-linear-gradient(left, rgba(130,237,210,1) 0%, rgba(131,209,251,1) 100%);
			background: -ms-linear-gradient(left, rgba(130,237,210,1) 0%, rgba(131,209,251,1) 100%);
			background: linear-gradient(to right, rgba(130,237,210,1) 0%, rgba(131,209,251,1) 100%);
			filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#82edd2', endColorstr='#83d1fb', GradientType=1 );
		}
		h1 {
			font-size: 17pt;
			padding: 10px 0;
			color: white;
			text-shadow: 1px 1px darkgrey;
		}
		h3 {
			color: darkgrey;
			font-weight: normal;
			font-size: 11pt;
			/*background: red;*/
			border-bottom: 1px solid lightgrey;
			border-radius: 5px 5px 0 0;
			-webkit-border-radius: 5px 5px 0 0;
			-o-border-radius: 5px 5px 0 0;
			-moz-border-radius: 5px 5px 0 0;
			/*text-shadow: 1px 1px darkgrey;*/
			font-style: none;
		}
		header div, #messages li, footer div{
			border-radius: 5px;
			-webkit-border-radius: 5px;
			-o-border-radius: 5px;
			-moz-border-radius: 5px;
			box-shadow: 1px 1px darkgrey;	
		}
		#messages li {
			margin: 10px 40px;
		}
		header, footer {
			position: fixed;
			width: 100%;
		}
		header {
			top: 0px;
		}
		footer {
			bottom: 0px;
		}
		header div, footer div {
			/*background: rgb(204, 255, 255);*/
			border: 2px solid white;
			margin: 10px 30px;
		}
		header div {
			margin-bottom: 0;
		}
		footer div {
			margin-top: 0;
		}
		h1 {
			text-align: center;
			font-weight: 400;
		}
		h3, p {
			padding: 5px 10px;
		}
		/*#name-form { background: #000;}
		#message-form { background: #000;}*/
		form { width: 100%; text-align: center; padding: 5px 0; }
		form input { border: 0; width: 90%; padding: 11px; }
		button { width: 9%; background: rgb(238, 246, 108); border: 1px solid white; padding: 3px 0 7px; }
		#messages { list-style-type: none; margin: 0; padding: 0; height: 70%; margin-top: 70px;overflow: hidden; overflow-y: scroll;}
		#messages li { 
			background: white;
		}
		#messages li:nth-child(even) { background: rgba(255,255,255,.8); 
		}
		.date {
			font-size: 10pt;
			font-style: italic;
			color: grey;
		}
	</style>
</head>
<body>
	<header>
		<div>
			<h1>Chaaat.it</h1>
		</div>
	</header>
	<ul id="messages">
		<li>
			<h3>Bob</h3>
			<p class="msg">This is a test block</p>
			<p class="date">5/12/2015, 11:05:45 PM</p>
		</li>
		<li>
			<h3>Bob</h3>
			<p class="msg">This is a test block</p>
			<p class="date">5/12/2015, 11:05:45 PM</p>
		</li>
		<li>
			<h3>Bob</h3>
			<p class="msg">This is a test block</p>
			<p class="date">5/12/2015, 11:05:45 PM</p>
		</li>
		<li>
			<h3>Bob</h3>
			<p class="msg">This is a test block</p>
			<p class="date">5/12/2015, 11:05:45 PM</p>
		</li>
		<li>
			<h3>Bob</h3>
			<p class="msg">This is a test block</p>
			<p class="date">5/12/2015, 11:05:45 PM</p>
		</li>
		<li>
			<h3>Bob</h3>
			<p class="msg">This is a test block</p>
			<p class="date">5/12/2015, 11:05:45 PM</p>
		</li>
		<li>
			<h3>Bob</h3>
			<p class="msg">This is a test block</p>
			<p class="date">5/12/2015, 11:05:45 PM</p>
		</li>
	</ul>
  
  <footer>
  	<div>
	  	<form id="name-form">
		    <input id="w" autocomplete="off" /><button>name</button>
		  </form>
		  <form action="" id="message-form">
		    <input id="m" autocomplete="off" /><button>Send</button>
		  </form>
		</div>
  </footer>
  <script src="http://code.jquery.com/jquery-1.11.1.js"></script>
	<script src="https://cdn.socket.io/socket.io-1.2.0.js"></script>
	<script src="/socket.io/socket.io.js"></script>
	<script>
		$(document).ready(function() {
		  var socket = io();
		  storage = window.localStorage;
		  $('#message-form').submit(function(){
		    socket.emit('chat message', $('#m').val());
		    $('#m').val('');
		    return false;
		  });

		  $('#name-form').submit(function(){
		  	storage.username = $('#w').val();
		  });

		  socket.on('chat message', function(msg) {
		  	var time = new Date();
		  	var month = time.getMonth();
		  	var monthDate = time.getDate();
		  	var year = time.getFullYear();
		  	var timeString = time.toLocaleTimeString();
		  	var nameSpace = $('<h3>').text(storage.username);
		  	var message = $('<p>').text(msg).addClass('msg');
		  	var timeStamp = $('<p>').text(month + '/' + monthDate + '/' + year + ', ' + timeString).addClass('date');
		  	var msgLi = $('<li>').append(nameSpace).append(message).append(timeStamp);
		  	$('#messages').append(msgLi);
		  });

	  });
	</script>
</body>
</html>